diff -u vmnet-only.a/filter.c vmnet-only/filter.c
--- vmnet-only.a/filter.c 2014-04-02 21:34:26.935944394 +0300
+++ vmnet-only/filter.c        2013-10-18 22:11:55.000000000 +0300
@@ -203,7 +203,7 @@
 #endif
 
 static unsigned int
-VNetFilterHookFn(unsigned int hooknum,                 // IN:
+VNetFilterHookFn(const struct nf_hook_ops *ops,        // IN:
 #ifdef VMW_NFHOOK_USES_SKB
                  struct sk_buff *skb,                  // IN:
 #else
@@ -252,7 +252,7 @@
 
    /* When the host transmits, hooknum is VMW_NF_INET_POST_ROUTING. */
    /* When the host receives, hooknum is VMW_NF_INET_LOCAL_IN. */
-   transmit = (hooknum == VMW_NF_INET_POST_ROUTING);
+   transmit = (ops->hooknum == VMW_NF_INET_POST_ROUTING);
 
    packetHeader = compat_skb_network_header(skb);
    ip = (struct iphdr*)packetHeader;
diff -rupN vmnet-only.a/vm_assert.h vmnet-only/vm_assert.h
--- vmnet-only.a/vm_assert.h      2014-03-31 18:49:14.845009422 +0100
+++ vmnet-only/vm_assert.h      2014-03-31 18:49:21.390009439 +0100
@@ -256,6 +256,7 @@ void WarningThrottled(uint32 *count, con
                                        __FILE__, __LINE__, __FUNCTION__, \
                                        _fix))
 #else
+   #undef DEPRECATED /* in <linux/printk.h> since 3.14.0 */
    #define DEPRECATED(_fix) do {} while (0)
 #endif
 
